# 功能描述

提供可视化的应用构建过程，分为：数据建模、页面建模、流程&自动化、集成配置、发布管理。从数据模型开始驱动应用设计，从业务模板、数据支持、组件支持、样式扩展4个方面，完善基于元数据和MDD框架页面设计，支持快速类ERP业务单据设计能力；通过拖拽布局和组件元素创建以交互为中心的高度定制化的组装页面；创建业务规则和业务流程，为多种不同的业务或应用的数据流转和工作执行提供支撑；同时通过前后端脚本能力，实现应前端UI控件交互控制，数据计算加工、状态更新、数据流转前后事件等扩展能力；集成智多星RPA机器人，快速和自动执行业务操作；应用支持多端运行和发布，为应用提供PC和移动同等业务执行支撑能力。

# 关键应用

* 数据建模

➢	资源列表

➢	新建实体

➢	新建查询

➢	新建枚举

* 页面建模

➢	单据页面

➢	表单页面

➢	画布页面

➢	分析页面

➢	第三方页面

* 流程&自动化

➢	工作流

➢	业务流

➢	机器人

➢	函数

* 集成配置

* 发布管理

# 主要操作说明

## 数据建模

数据建模提供应用中数据存储的基本服务，可根据业务数据特征快速引用审批、业务流、交易类型、自动编码、档案状态、主组织等系统属性；同时提供基于数据实体的关联及合并查询定义，为综合的数据应用提供基础。

**1）资源列表**

如下图所示，数据建模中包含当前租户、当前领域、当前应用创建的所有实体、查询和枚举类型的数据资源，支持按名称搜索、按类型和编码手动排序、翻页等功能。

![](/articles/yonbuilder/2-/image1/image2.png)
 
* 实体：环境中的存储应用数据的对象（表），包括应用中自行创建的实体，也包括原厂应用（财务、采购等）的实体，提供数据存储；
* 查询：基于实体或其他查询通过关联过滤等一系列描述返回的数据集合和显示方式；
* 枚举：提供枚举数据供实体中的单选和多选进行引用。

**2）新建实体**

**实体功能：**

a 属性设计与维护，包括主属性、业务属性和业务属性，如下图所示：

![](/articles/yonbuilder/2-/image1/image3.png)

 
b 实体数据关系查看，通过ER图的方式显示，如下图所示。关系图显示当前实体的上一级和下一级实体，没有则不显示；下面的列表显示选中实体的所有属性，提供全屏查看实体属性的功能，属性不可编辑。 
 
![](/articles/yonbuilder/2-/image1/image4.png)

![](/articles/yonbuilder/2-/image1/image5.png)


 
c 实体的发布、停用和删除。实体发布以后，在页面建模和自动化流程等可以使用实体数据，停用或删除实体后将无法继续使用。

**新增实体：**

新增实体有两种方式：直接新增实体、复制已有实体，如下图所示：

![](/articles/yonbuilder/2-/image1/image6.png)

 
方法一：创建新实体时，如下图所示，根据应用构建的需要编辑实体信息，包括主表和属性，系统属性自动生成。

![](/articles/yonbuilder/2-/image1/image7.png)

 
主表包括实体名称、编码、父实体、描述信息、引用接口等

实体名称/编码：必填，不可重复

父实体：可选项，下拉选择，可选当前应用已发布的实体名称；

描述信息：可选项，对实体进行简要描述

引用接口：可选项，接口包括审批、业务流、交易类型、树型结构等；

实体的属性：

属性编码/名称：可手动修改，首次编辑属性名称时编码会生成对应的拼音字段；

属性类型：默认类型为文本，可根据需要进行重新选择；

引用：当类型为单选引用时，可选实体范围：平台已发布参照、当前租户已购买应用的参照、协同表单发布的参照、自建应用中发布的参照等；当类型为单选或多选时，可选的枚举范围为：平台已发布枚举和租户自建枚举；

表字段名：不可编辑，系统自动生成；

唯一：可选，勾选后该属性字段名不可重复；

标签：可多选，从参照中选择，无默认值，从右侧操作面板中进行操作。

系统属性：包括基类属性+特性的属性两部分内容，作为系统属性显示在“系统属性”页签，仅查看，不提供编辑和删除功能。

如下图所示，系统属性与勾选的引用接口有关，根据选择的接口分成基础可选项、审批、业务流、交易类型等八种，每一种下面包含多个系统属性，可以展开查看。

![](/articles/yonbuilder/2-/image1/image8.png)

 
方法二：复制已有实体，如下图所示，选择已发布的实体，在选择的实体的基础上新增实体，适用于新增实体与已发布实体属性具有一定的重复。

![](/articles/yonbuilder/2-/image1/image9.png)

 
**3）新建查询**

数据建模中的查询元数据，供应用构建自身使用，此处的数据显示范围为当前应用创建的查询。查询元数据提供以下功能：查询元数据包括领域预置的内容和租户自定义，因此支持设计器入口； 查询元数据使用时在业务仓执行数据； 查询元数据能够选择的资源包括实体元数据和其他查询元数据。

![](/articles/yonbuilder/2-/image1/image10.png)

 
新增查询，如上图所示，查询元数据支持两种关系类型：关联、合并。接下来以关联查询元数据为例进行讲解：

输入名称和编码，选择查询类型，保存后点击设计进入到查询设计器页面，如下图所示：

![](/articles/yonbuilder/2-/image1/image11.png)

 
查询设计器页面的左侧按实体、查询分别显示，当前领域已购买的应用的实体和平台的实体，查询数据包括系统预置的及自建的。

分别点击两表上面头部部分的方式建立两表之间的关系，默认内连接，提供内连接、左连接及右连接，可修改。根据两个表的数据关联关系，选择对应的关联字段进行关联连接。

![](/articles/yonbuilder/2-/image1/image12.png)

      
过滤条件的设置可以支持多个筛选条件进行数据过滤查询，设置界面如下：

![](/articles/yonbuilder/2-/image1/image13.png)

 
数据过滤条件的设置，主要包括以下部分：

a、逻辑符：支持与条件和或条件，当有多个条件时按现有的顺序执行；
b、过滤条件的操作符：包含/不包含、等于/不等于、大于/大于等于、小于/小于等于、开始是、结尾是、中间是
c、空值规则：空值返回所有数据/空值不返回数据，默认空值返回所有数据；
d、值类型：包括常量和参数标签，根据不同类型，对应不同的取值；
e、操作：支持增加和删除。

**4）新建枚举**

当实体的字段类型选择“单选/多选”时，后面的引用字段可编辑，引用枚举页面如下图所示，该页面内显示系统级枚举及租户自定义的枚举。

![](/articles/yonbuilder/2-/image1/image14.png)

 
新建枚举时在数据建模下点击【新建枚举】进入如下图页面，填写新建枚举数据的名称和编码，依次点击【新增】创建多个枚举并修改枚举值，最后保存即可。枚举数据支持二次编辑，保存会将自动同步至给相应的“单选/多选”。

![](/articles/yonbuilder/2-/image1/image15.png)

 
## 页面建模

提供应用的功能页面设计器、组合页面设计器、报表设计器，支持不同功能业务页面的设计，同时支持前后端扩展，实现单据页面、画布页面、业务事件的构建和交互驱动过程的个性化扩展。

* 创建单据页面
单据设计器提供7种预置模板和多种布局容器和组件，支持表格、表单、网格、树等多种页面的组装能力：

**预置模板**：提供单表、单卡、左树右表、左树右卡、树形表、一主多子、主子孙表7个常用模板。

新建页面时先选择模板或空页面，如下图所示。

![](/articles/yonbuilder/2-/image1/image16.png)

 
根据向导创建页面。

比如选择单卡模板，生成一个单据页面，绑定元数据，参照的数据范围为当前应用已发献上的实体元数据。

生成单卡页面的同时，可以选择同时生成参照页面及移动页面，而列表页面是生成卡片页面的必要条件，生成页面时，列表页面和单卡页面是同时生成的。

![](/articles/yonbuilder/2-/image1/image17.png)

 
点击【完成】后，系统创建单卡及列表页面，生成的单卡页面如下图所示：

![](/articles/yonbuilder/2-/image1/image18.png)

 
模板由三个区域构成：组件区、设计区和属性区。

**组件区**：提供构成页面的元素，包括布局容器、数据容器、工具栏、按钮控件、基础控件、业务控件、协作控件等。

**设计区**：单据页面的设计区域。包括卡片头部按钮区、卡片底部按钮区、数据显示区域等，根据需要来设计。

**属性区**：选中的页面元素的属性设置区域。

**布局容器**：构成页面布局的元素，系统提供了网格、卡片组和多页签三种布局容器，容器支持样式包括大小和位置，背景图边框颜色等属性设置；布局容器中拖入组件控件来实现单据页面的组装。

数据容器：

**工具栏**：定义单据页面中的操作按钮区域及按钮区域的样式。

**按钮控件**：定义单据页中按钮区域中的按钮，包括按钮和下拉按钮两个控件，可定义按钮类型、规格类型及单击按钮的动作，包括 新增、编辑、删除、提交、撤回、启用、停用等。

**基础控件**：定义单据页面的基础控件，包括本框、多行文本、富文本、多语文本、手机、电话、邮箱、证件号、数值、金额、选项、开关、日期框、日期时间、时间框、评分、地图定位、图片上传等。

**业务控件**：定义单据页面中需要的业务类控件，包括附件管理、参照框、自动编码、下推按钮、打印、描述信息等。

**协作控件**：与协作套件相关的控件，包括协作套件和沟通套件。
其他：包括自定义控件，即用户可通过关联扩展组件或配置关联属性的方式来定义系统中不存在的控件使用。

* 创建表单页面

可以通过表单设计器新创建协同表单，在表单设计器页面拖拽布局和控件制作表单，详见协同服务-审批-审批设置-表单管理章节。

![](/articles/yonbuilder/2-/image1/image19.png)

![](/articles/yonbuilder/2-/image1/image20.png)
 
 
还可以引用已有的协同表单页面，按表单所属分类和表单名称引入。

![](/articles/yonbuilder/2-/image1/image21.png)

 
也能为表单页面创建台账页面，设置web端和移动端台账的过滤字段、排序字段和列表字段。

![](/articles/yonbuilder/2-/image1/image22.png)

![](/articles/yonbuilder/2-/image1/image23.png)
 
 
* 创建画布页面

画布页面设计器提供8种预置模板和多种布局容器和组件，支持流式排列和自由布局的页面组装能力：

**预置模板**：提供2个区域，3个区域、主区域和右侧栏、标题和右侧栏、标题和左侧栏、页眉和两个区域、页眉和三个区域、页眉和多个区域和页眉和多区域8个常用模板。

![](/articles/yonbuilder/2-/image1/image24.png)

 
**布局容器**：提供网格、多页签、空白容器和按钮栏等布局容器，容器支持样式包括大小和位置，背景图边框颜色等属性设置；布局容器中拖入组件控件来实现页面的组装。

![](/articles/yonbuilder/2-/image1/image25.png)

 
**组件控件**：分为基础控件和分析引用控件、应用元素。

* 基础控件目前提供了：标签、选项、按钮、描述、图片、文本框、数值、日期、时间、日期时间等。

![](/articles/yonbuilder/2-/image1/image26.png)

 
* 分析引用控件目前提供了：分析报表和分析卡片，分析报表支持引用智能分析的分析和报表页面，分析卡片支持引用智能分析的分析卡片。

![](/articles/yonbuilder/2-/image1/image27.png)

 
* 应用元素控件目前提供了：审批事项和页面，可以嵌入审批的待办已办等事项和其他页面。

![](/articles/yonbuilder/2-/image1/image28.png)


 
**创建流式排列页面**：设置画布页面属性为流式排列，此种模式下拖入容器和组件后会以瀑布流的方式布局。

**创建自由布局页面**：设置画布页面属性为自由布局，此种模式下拖入容器和组件后可自由拖动排列布局。

自由布局下，可以设置容器和组件的锚点，控制属性见下图

![](/articles/yonbuilder/2-/image1/image29.png)

 
所有的属性都是针对部件的父对象进行设置：

X值、Y值：以父容器左上开始向右下的像素值；

宽度、高度：本容器的高宽像素值；

锚点方向：指与父容器四边的关系（无关系、固定像素、百分比像素）

**页面参数**：提供文本、数值和日期类型的参数，在页面被引用时可以传入参数，根据传入的参数展示页面内容。图例是数据分析卡片的参数设置：

1)设置分析卡片的参数

![](/articles/yonbuilder/2-/image1/image30.png)



 
2)设置筛选器中字段的接收参数绑定：

![](/articles/yonbuilder/2-/image1/image31.png)



 
3）设置页面参数：在画布页面中设置页面并绑定参数，图例是针对数据卡片页面设置参数

![](/articles/yonbuilder/2-/image1/image32.png)



 
运行时页面参数：可以根据输入的参数或者脚本传参的值过滤显示对应的图表值。

![](/articles/yonbuilder/2-/image1/image33.png)

 
•	**创建分析页面**

分析页面分为分析、报表、分析卡片和已有页面引用，可以直接从这个入口创建智能

分析页面，也可以引用在智能分析中制作好的页面。

选择好分析页面类型，下一步就是数据模型的绑定，数据模型的范围是应用构建平台的数据实体和查询。
选择了数据模型进入到的智能分析制作页面将会自动添加该数据实体/查询做为数据模型，可以基于此模型直接创建分析图表也可以在此基础上添加数据模型联合创建分析图表，智能分析图表的创建详见数据智能服务章节。

*	**创建第三方页面**

可以在应用中引入第三方的链接页面。 

![](/articles/yonbuilder/2-/image1/image34.png)
 
通过URL直接引用即可。

![](/articles/yonbuilder/2-/image1/image35.png)
 
## 流程&自动化

包括工作流、业务流、机器人和函数的设置。

**工作流**

应用构建的工作流，为当前应用的引用了审批的业务单据创建流程的审批服务，提供流程模型的新增、编辑、删除、设计、启用等功能。详见数字化建模-流程管理-模型管理章节。

![](/articles/yonbuilder/2-/image1/image36.png)

 
**业务流**

应用构建的业务流，把各种类型的能力、服务、APP 组装编排起来, 通过数智驱动来保障企业或组织的业务目标或价值目标的实现。
为应用和其他应用的业务单据创建数据流转服务，提供流程的管理和日志功能，详见数字化建模-流程管理-业务流章节。

![](/articles/yonbuilder/2-/image1/image37.png)

 
流程设计器页面分为左中右结构，可设置拉单、推单、回写等功能。

![](/articles/yonbuilder/2-/image1/image38.png)

**机器人**

全面集成智多星RPA机器人，集模板的创建、机器人的创建和部署于一体，机器人可以在流程、定时调度任务启动运行,帮助自动完成重复耗时的任务, 提高工作效率。
要能使用该模块，须购买智多星RPA机器人服务。

➢	**创建机器人**：支持全新创建和引用已有的机器人。

![](/articles/yonbuilder/2-/image1/image39.png)

 
创建过程分为5个步骤：基本信息—>选择模板—>设置变量—>数据集-部署。

*	基本信息：填写机器人名称和调用方式。

![](/articles/yonbuilder/2-/image1/image40.png)
 
*	选择模板：选择机器人模板，可以选择制作好的各领域的模板。

![](/articles/yonbuilder/2-/image1/image41.png)


 
*	变量设置：设置模板中用到的变量值。

![](/articles/yonbuilder/2-/image1/image42.png)


 
*	数据集：下载和上传模板中用到的据集。

![](/articles/yonbuilder/2-/image1/image43.png)


 
*	部署：选择机器人运行的客户端环境，该环境需安装RPA客户端。

![](/articles/yonbuilder/2-/image1/image44.png)


 
➢	**调用机器人**：目前提供在流程中和调度任务中调用机器人。

*	流程中调用：流程环节中增加机器人环节，设置环节的名称并选择要调用的机器人。设置后在流程流转到该机器人环节时就会启动任务的执行。

![](/articles/yonbuilder/2-/image1/image45.png)

 
*	调度任务：为机器人设置调度任务信息（定时规则、消息设置），设置成功后会按时启动调度任务去执行。

![](/articles/yonbuilder/2-/image1/image46.png)

 
➢	**部署机器人**：选择机器人运行的客户端环境，该环境需安装RPA客户端，可多选，可查看部署详情。

![](/articles/yonbuilder/2-/image1/image47.png)


 

**函数**

基于应用构建平台的脚本引擎，支持用户完成自定义逻辑的脚本编写；类型分为前端脚本和后端脚本，无论前端还是后端脚本都是以JS为语言规范，其中操作元数据是以平台提供的YonSQL对数据进行操作，YonSQL支持SQL95标准规范与绝大部分SQL编写方式。

![](/articles/yonbuilder/2-/image1/image48.png)

 
**前端脚本**：可用于控件状态控制、控件赋值、简单数据计算、openAPI调用；

**后端脚本**：可用于后端数据计算、业务调用、数据实体赋值、openAPI调用；

**函数应用**：在单据页面、画布页面、流程（工作流、业务流）、表达式、变量、及作为通用函数使用，有以下三种使用场景：

1、在应用构建中支持MDF扩展，有独立的函数资源管理，在单据页面设计器页面中调用；

![](/articles/yonbuilder/2-/image1/image49.png)


 
2、在具体的设计器中嵌入使用，没有独立的函数资源管理，在画布页面设计器、工作流设计器、业务流设计器中使用，由各设计器自行管理脚本，统一存储和调用执行；

![](/articles/yonbuilder/2-/image1/image50.png)

 
 3、作为通用扩展能力在支持在环境中支持扩展脚本能力，有独立的函数资源管理，表达式、变量、通用函数； 

## 集成配置

## 应用管理

应用管理提供应用的基本信息的维护，以及对外发布的服务和菜单的管理。
同时支持web/移动的应用发布。

**创建菜单结构**：添加分组列表。

![](/articles/yonbuilder/2-/image1/image51.png)
 
**添加页面服务**：在分组列表下添加页面服务。


![](/articles/yonbuilder/2-/image1/image52.png)
 
**发布应用**：可同时发布到工作台和友空间，应用主页支持按菜单结构默认生成和指定
页面的方式。

![](/articles/yonbuilder/2-/image1/image53.png)
 
支持应用服务的发布，发布后可被系统其它模块当做服务调用。


![](/articles/yonbuilder/2-/image1/image54.png)
 






